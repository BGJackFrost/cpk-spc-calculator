{
  "query": "\n-- Widget Templates\nCREATE TABLE IF NOT EXISTS widget_templates (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  `key` VARCHAR(100) NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  category ENUM('chart', 'stats', 'table', 'alert', 'ai', 'custom') DEFAULT 'chart' NOT NULL,\n  default_config JSON,\n  min_width INT DEFAULT 1 NOT NULL,\n  min_height INT DEFAULT 1 NOT NULL,\n  max_width INT DEFAULT 4 NOT NULL,\n  max_height INT DEFAULT 4 NOT NULL,\n  default_width INT DEFAULT 2 NOT NULL,\n  default_height INT DEFAULT 2 NOT NULL,\n  component_name VARCHAR(100) NOT NULL,\n  required_role ENUM('user', 'manager', 'admin') DEFAULT 'user',\n  is_active INT DEFAULT 1 NOT NULL,\n  is_default INT DEFAULT 0 NOT NULL,\n  display_order INT DEFAULT 0 NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_widget_template_key (`key`),\n  INDEX idx_widget_template_category (category),\n  INDEX idx_widget_template_active (is_active)\n);\n\n-- Dashboard Widget Configs\nCREATE TABLE IF NOT EXISTS dashboard_widget_configs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  widget_template_id INT NOT NULL,\n  grid_x INT DEFAULT 0 NOT NULL,\n  grid_y INT DEFAULT 0 NOT NULL,\n  grid_width INT DEFAULT 2 NOT NULL,\n  grid_height INT DEFAULT 2 NOT NULL,\n  config JSON,\n  is_visible INT DEFAULT 1 NOT NULL,\n  dashboard_id INT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_dashboard_widget_user (user_id),\n  INDEX idx_dashboard_widget_template (widget_template_id),\n  INDEX idx_dashboard_widget_dashboard (dashboard_id)\n);\n\n-- User Dashboard Layouts\nCREATE TABLE IF NOT EXISTS user_dashboard_layouts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  name VARCHAR(255) DEFAULT 'Default Dashboard' NOT NULL,\n  description TEXT,\n  grid_columns INT DEFAULT 12 NOT NULL,\n  row_height INT DEFAULT 100 NOT NULL,\n  theme ENUM('light', 'dark', 'auto') DEFAULT 'auto',\n  is_default INT DEFAULT 0 NOT NULL,\n  is_active INT DEFAULT 1 NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_user_dashboard_layout_user (user_id),\n  INDEX idx_user_dashboard_layout_default (is_default)\n);\n\n-- Batch Image Analysis Jobs\nCREATE TABLE IF NOT EXISTS batch_image_analysis_jobs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  analysis_type ENUM('defect_detection', 'quality_inspection', 'comparison', 'ocr', 'custom') DEFAULT 'defect_detection' NOT NULL,\n  product_code VARCHAR(100),\n  production_line_id INT,\n  workstation_id INT,\n  status ENUM('pending', 'processing', 'completed', 'failed', 'cancelled') DEFAULT 'pending' NOT NULL,\n  total_images INT DEFAULT 0 NOT NULL,\n  processed_images INT DEFAULT 0 NOT NULL,\n  success_images INT DEFAULT 0 NOT NULL,\n  failed_images INT DEFAULT 0 NOT NULL,\n  ok_count INT DEFAULT 0 NOT NULL,\n  ng_count INT DEFAULT 0 NOT NULL,\n  warning_count INT DEFAULT 0 NOT NULL,\n  avg_quality_score DECIMAL(5,2),\n  defects_summary JSON,\n  started_at TIMESTAMP NULL,\n  completed_at TIMESTAMP NULL,\n  processing_time_ms INT,\n  error_message TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_batch_image_job_user (user_id),\n  INDEX idx_batch_image_job_status (status),\n  INDEX idx_batch_image_job_created (created_at)\n);\n\n-- Batch Image Items\nCREATE TABLE IF NOT EXISTS batch_image_items (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  job_id INT NOT NULL,\n  file_name VARCHAR(255) NOT NULL,\n  file_size INT,\n  image_url VARCHAR(500) NOT NULL,\n  image_key VARCHAR(255),\n  thumbnail_url VARCHAR(500),\n  status ENUM('pending', 'processing', 'completed', 'failed') DEFAULT 'pending' NOT NULL,\n  process_order INT DEFAULT 0 NOT NULL,\n  result ENUM('ok', 'ng', 'warning', 'unknown') DEFAULT 'unknown',\n  quality_score DECIMAL(5,2),\n  confidence DECIMAL(5,4),\n  defects_found INT DEFAULT 0,\n  defect_types JSON,\n  defect_locations JSON,\n  ai_analysis JSON,\n  ai_model_used VARCHAR(100),\n  processing_time_ms INT,\n  analyzed_at TIMESTAMP NULL,\n  error_message TEXT,\n  retry_count INT DEFAULT 0 NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_batch_image_item_job (job_id),\n  INDEX idx_batch_image_item_status (status),\n  INDEX idx_batch_image_item_result (result)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2bBfAdpTc8yvngq.root --database RpnsLdN3u3f6PBDr9mn7Zq --execute \n-- Widget Templates\nCREATE TABLE IF NOT EXISTS widget_templates (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  `key` VARCHAR(100) NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  category ENUM('chart', 'stats', 'table', 'alert', 'ai', 'custom') DEFAULT 'chart' NOT NULL,\n  default_config JSON,\n  min_width INT DEFAULT 1 NOT NULL,\n  min_height INT DEFAULT 1 NOT NULL,\n  max_width INT DEFAULT 4 NOT NULL,\n  max_height INT DEFAULT 4 NOT NULL,\n  default_width INT DEFAULT 2 NOT NULL,\n  default_height INT DEFAULT 2 NOT NULL,\n  component_name VARCHAR(100) NOT NULL,\n  required_role ENUM('user', 'manager', 'admin') DEFAULT 'user',\n  is_active INT DEFAULT 1 NOT NULL,\n  is_default INT DEFAULT 0 NOT NULL,\n  display_order INT DEFAULT 0 NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_widget_template_key (`key`),\n  INDEX idx_widget_template_category (category),\n  INDEX idx_widget_template_active (is_active)\n);\n\n-- Dashboard Widget Configs\nCREATE TABLE IF NOT EXISTS dashboard_widget_configs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  widget_template_id INT NOT NULL,\n  grid_x INT DEFAULT 0 NOT NULL,\n  grid_y INT DEFAULT 0 NOT NULL,\n  grid_width INT DEFAULT 2 NOT NULL,\n  grid_height INT DEFAULT 2 NOT NULL,\n  config JSON,\n  is_visible INT DEFAULT 1 NOT NULL,\n  dashboard_id INT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_dashboard_widget_user (user_id),\n  INDEX idx_dashboard_widget_template (widget_template_id),\n  INDEX idx_dashboard_widget_dashboard (dashboard_id)\n);\n\n-- User Dashboard Layouts\nCREATE TABLE IF NOT EXISTS user_dashboard_layouts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  name VARCHAR(255) DEFAULT 'Default Dashboard' NOT NULL,\n  description TEXT,\n  grid_columns INT DEFAULT 12 NOT NULL,\n  row_height INT DEFAULT 100 NOT NULL,\n  theme ENUM('light', 'dark', 'auto') DEFAULT 'auto',\n  is_default INT DEFAULT 0 NOT NULL,\n  is_active INT DEFAULT 1 NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_user_dashboard_layout_user (user_id),\n  INDEX idx_user_dashboard_layout_default (is_default)\n);\n\n-- Batch Image Analysis Jobs\nCREATE TABLE IF NOT EXISTS batch_image_analysis_jobs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  analysis_type ENUM('defect_detection', 'quality_inspection', 'comparison', 'ocr', 'custom') DEFAULT 'defect_detection' NOT NULL,\n  product_code VARCHAR(100),\n  production_line_id INT,\n  workstation_id INT,\n  status ENUM('pending', 'processing', 'completed', 'failed', 'cancelled') DEFAULT 'pending' NOT NULL,\n  total_images INT DEFAULT 0 NOT NULL,\n  processed_images INT DEFAULT 0 NOT NULL,\n  success_images INT DEFAULT 0 NOT NULL,\n  failed_images INT DEFAULT 0 NOT NULL,\n  ok_count INT DEFAULT 0 NOT NULL,\n  ng_count INT DEFAULT 0 NOT NULL,\n  warning_count INT DEFAULT 0 NOT NULL,\n  avg_quality_score DECIMAL(5,2),\n  defects_summary JSON,\n  started_at TIMESTAMP NULL,\n  completed_at TIMESTAMP NULL,\n  processing_time_ms INT,\n  error_message TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_batch_image_job_user (user_id),\n  INDEX idx_batch_image_job_status (status),\n  INDEX idx_batch_image_job_created (created_at)\n);\n\n-- Batch Image Items\nCREATE TABLE IF NOT EXISTS batch_image_items (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  job_id INT NOT NULL,\n  file_name VARCHAR(255) NOT NULL,\n  file_size INT,\n  image_url VARCHAR(500) NOT NULL,\n  image_key VARCHAR(255),\n  thumbnail_url VARCHAR(500),\n  status ENUM('pending', 'processing', 'completed', 'failed') DEFAULT 'pending' NOT NULL,\n  process_order INT DEFAULT 0 NOT NULL,\n  result ENUM('ok', 'ng', 'warning', 'unknown') DEFAULT 'unknown',\n  quality_score DECIMAL(5,2),\n  confidence DECIMAL(5,4),\n  defects_found INT DEFAULT 0,\n  defect_types JSON,\n  defect_locations JSON,\n  ai_analysis JSON,\n  ai_model_used VARCHAR(100),\n  processing_time_ms INT,\n  analyzed_at TIMESTAMP NULL,\n  error_message TEXT,\n  retry_count INT DEFAULT 0 NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX idx_batch_image_item_job (job_id),\n  INDEX idx_batch_image_item_status (status),\n  INDEX idx_batch_image_item_result (result)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2982
}