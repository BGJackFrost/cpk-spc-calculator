{
  "query": "-- Camera Sessions\nCREATE TABLE IF NOT EXISTS camera_sessions (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    user_id INT NOT NULL,\n    session_name VARCHAR(255),\n    camera_id INT,\n    camera_stream_url VARCHAR(500),\n    resolution VARCHAR(50),\n    status ENUM('active', 'paused', 'completed', 'cancelled') DEFAULT 'active' NOT NULL,\n    product_id INT,\n    production_line_id INT,\n    workstation_id INT,\n    capture_interval INT,\n    auto_capture BOOLEAN DEFAULT FALSE,\n    capture_count INT DEFAULT 0 NOT NULL,\n    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    ended_at TIMESTAMP NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_camera_sessions_user (user_id),\n    INDEX idx_camera_sessions_status (status),\n    INDEX idx_camera_sessions_camera (camera_id),\n    INDEX idx_camera_sessions_line (production_line_id)\n);\n\n-- Image Annotations\nCREATE TABLE IF NOT EXISTS image_annotations (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    image_id INT NOT NULL,\n    image_type ENUM('sn_image', 'quality_image', 'comparison') DEFAULT 'sn_image' NOT NULL,\n    user_id INT NOT NULL,\n    annotation_type ENUM('rectangle', 'circle', 'ellipse', 'arrow', 'freehand', 'text', 'highlight', 'measurement') NOT NULL,\n    x DECIMAL(10, 6) NOT NULL,\n    y DECIMAL(10, 6) NOT NULL,\n    width DECIMAL(10, 6),\n    height DECIMAL(10, 6),\n    end_x DECIMAL(10, 6),\n    end_y DECIMAL(10, 6),\n    path_data JSON,\n    color VARCHAR(20) DEFAULT '#ff0000',\n    stroke_width INT DEFAULT 2,\n    fill_color VARCHAR(20),\n    opacity DECIMAL(3, 2) DEFAULT 1.00,\n    label VARCHAR(255),\n    description TEXT,\n    measurement_value DECIMAL(15, 6),\n    measurement_unit VARCHAR(20),\n    is_visible BOOLEAN DEFAULT TRUE,\n    z_index INT DEFAULT 0,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_annotations_image (image_id, image_type),\n    INDEX idx_annotations_user (user_id),\n    INDEX idx_annotations_type (annotation_type)\n);\n\n-- AI Image Comparison Results\nCREATE TABLE IF NOT EXISTS ai_image_comparison_results (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    comparison_id INT,\n    image1_id INT,\n    image2_id INT,\n    image1_url VARCHAR(1000),\n    image2_url VARCHAR(1000),\n    user_id INT NOT NULL,\n    analysis_type ENUM('difference', 'quality', 'defect', 'measurement', 'similarity') DEFAULT 'difference' NOT NULL,\n    status ENUM('pending', 'processing', 'completed', 'failed') DEFAULT 'pending' NOT NULL,\n    similarity_score DECIMAL(5, 2),\n    difference_score DECIMAL(5, 2),\n    differences JSON,\n    differences_count INT DEFAULT 0 NOT NULL,\n    ai_summary TEXT,\n    ai_detailed_analysis TEXT,\n    ai_recommendations TEXT,\n    highlighted_regions JSON,\n    difference_overlay_url VARCHAR(1000),\n    processing_time_ms INT,\n    model_used VARCHAR(100),\n    error_message TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    completed_at TIMESTAMP NULL,\n    INDEX idx_ai_comparison_user (user_id),\n    INDEX idx_ai_comparison_status (status),\n    INDEX idx_ai_comparison_type (analysis_type),\n    INDEX idx_ai_comparison_created (created_at)\n);\n\n-- Annotation Templates\nCREATE TABLE IF NOT EXISTS annotation_templates (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    user_id INT NOT NULL,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    annotations JSON NOT NULL,\n    category VARCHAR(100),\n    tags JSON,\n    usage_count INT DEFAULT 0 NOT NULL,\n    is_public BOOLEAN DEFAULT FALSE,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_annotation_templates_user (user_id),\n    INDEX idx_annotation_templates_category (category),\n    INDEX idx_annotation_templates_public (is_public)\n);\n\n-- Camera Configurations\nCREATE TABLE IF NOT EXISTS camera_configurations (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    stream_url VARCHAR(500) NOT NULL,\n    stream_type ENUM('rtsp', 'http', 'webrtc', 'mjpeg', 'hls') DEFAULT 'http' NOT NULL,\n    username VARCHAR(100),\n    password VARCHAR(255),\n    resolution VARCHAR(50) DEFAULT '1920x1080',\n    frame_rate INT DEFAULT 30,\n    production_line_id INT,\n    workstation_id INT,\n    position VARCHAR(100),\n    is_active BOOLEAN DEFAULT TRUE,\n    last_connected_at TIMESTAMP NULL,\n    connection_status ENUM('connected', 'disconnected', 'error', 'unknown') DEFAULT 'unknown',\n    created_by INT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_camera_config_line (production_line_id),\n    INDEX idx_camera_config_workstation (workstation_id),\n    INDEX idx_camera_config_active (is_active)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2bBfAdpTc8yvngq.root --database RpnsLdN3u3f6PBDr9mn7Zq --execute -- Camera Sessions\nCREATE TABLE IF NOT EXISTS camera_sessions (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    user_id INT NOT NULL,\n    session_name VARCHAR(255),\n    camera_id INT,\n    camera_stream_url VARCHAR(500),\n    resolution VARCHAR(50),\n    status ENUM('active', 'paused', 'completed', 'cancelled') DEFAULT 'active' NOT NULL,\n    product_id INT,\n    production_line_id INT,\n    workstation_id INT,\n    capture_interval INT,\n    auto_capture BOOLEAN DEFAULT FALSE,\n    capture_count INT DEFAULT 0 NOT NULL,\n    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    ended_at TIMESTAMP NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_camera_sessions_user (user_id),\n    INDEX idx_camera_sessions_status (status),\n    INDEX idx_camera_sessions_camera (camera_id),\n    INDEX idx_camera_sessions_line (production_line_id)\n);\n\n-- Image Annotations\nCREATE TABLE IF NOT EXISTS image_annotations (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    image_id INT NOT NULL,\n    image_type ENUM('sn_image', 'quality_image', 'comparison') DEFAULT 'sn_image' NOT NULL,\n    user_id INT NOT NULL,\n    annotation_type ENUM('rectangle', 'circle', 'ellipse', 'arrow', 'freehand', 'text', 'highlight', 'measurement') NOT NULL,\n    x DECIMAL(10, 6) NOT NULL,\n    y DECIMAL(10, 6) NOT NULL,\n    width DECIMAL(10, 6),\n    height DECIMAL(10, 6),\n    end_x DECIMAL(10, 6),\n    end_y DECIMAL(10, 6),\n    path_data JSON,\n    color VARCHAR(20) DEFAULT '#ff0000',\n    stroke_width INT DEFAULT 2,\n    fill_color VARCHAR(20),\n    opacity DECIMAL(3, 2) DEFAULT 1.00,\n    label VARCHAR(255),\n    description TEXT,\n    measurement_value DECIMAL(15, 6),\n    measurement_unit VARCHAR(20),\n    is_visible BOOLEAN DEFAULT TRUE,\n    z_index INT DEFAULT 0,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_annotations_image (image_id, image_type),\n    INDEX idx_annotations_user (user_id),\n    INDEX idx_annotations_type (annotation_type)\n);\n\n-- AI Image Comparison Results\nCREATE TABLE IF NOT EXISTS ai_image_comparison_results (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    comparison_id INT,\n    image1_id INT,\n    image2_id INT,\n    image1_url VARCHAR(1000),\n    image2_url VARCHAR(1000),\n    user_id INT NOT NULL,\n    analysis_type ENUM('difference', 'quality', 'defect', 'measurement', 'similarity') DEFAULT 'difference' NOT NULL,\n    status ENUM('pending', 'processing', 'completed', 'failed') DEFAULT 'pending' NOT NULL,\n    similarity_score DECIMAL(5, 2),\n    difference_score DECIMAL(5, 2),\n    differences JSON,\n    differences_count INT DEFAULT 0 NOT NULL,\n    ai_summary TEXT,\n    ai_detailed_analysis TEXT,\n    ai_recommendations TEXT,\n    highlighted_regions JSON,\n    difference_overlay_url VARCHAR(1000),\n    processing_time_ms INT,\n    model_used VARCHAR(100),\n    error_message TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    completed_at TIMESTAMP NULL,\n    INDEX idx_ai_comparison_user (user_id),\n    INDEX idx_ai_comparison_status (status),\n    INDEX idx_ai_comparison_type (analysis_type),\n    INDEX idx_ai_comparison_created (created_at)\n);\n\n-- Annotation Templates\nCREATE TABLE IF NOT EXISTS annotation_templates (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    user_id INT NOT NULL,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    annotations JSON NOT NULL,\n    category VARCHAR(100),\n    tags JSON,\n    usage_count INT DEFAULT 0 NOT NULL,\n    is_public BOOLEAN DEFAULT FALSE,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_annotation_templates_user (user_id),\n    INDEX idx_annotation_templates_category (category),\n    INDEX idx_annotation_templates_public (is_public)\n);\n\n-- Camera Configurations\nCREATE TABLE IF NOT EXISTS camera_configurations (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    stream_url VARCHAR(500) NOT NULL,\n    stream_type ENUM('rtsp', 'http', 'webrtc', 'mjpeg', 'hls') DEFAULT 'http' NOT NULL,\n    username VARCHAR(100),\n    password VARCHAR(255),\n    resolution VARCHAR(50) DEFAULT '1920x1080',\n    frame_rate INT DEFAULT 30,\n    production_line_id INT,\n    workstation_id INT,\n    position VARCHAR(100),\n    is_active BOOLEAN DEFAULT TRUE,\n    last_connected_at TIMESTAMP NULL,\n    connection_status ENUM('connected', 'disconnected', 'error', 'unknown') DEFAULT 'unknown',\n    created_by INT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n    INDEX idx_camera_config_line (production_line_id),\n    INDEX idx_camera_config_workstation (workstation_id),\n    INDEX idx_camera_config_active (is_active)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 4306
}