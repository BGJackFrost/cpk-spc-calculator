{
  "query": "CREATE TABLE IF NOT EXISTS custom_alert_rules (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  metric_type VARCHAR(50) NOT NULL,\n  operator VARCHAR(20) NOT NULL,\n  threshold DOUBLE NOT NULL,\n  threshold_max DOUBLE,\n  severity VARCHAR(20) NOT NULL DEFAULT 'warning',\n  is_active BOOLEAN NOT NULL DEFAULT TRUE,\n  evaluation_interval_minutes INT NOT NULL DEFAULT 5,\n  cooldown_minutes INT NOT NULL DEFAULT 30,\n  consecutive_breaches_required INT NOT NULL DEFAULT 1,\n  current_consecutive_breaches INT NOT NULL DEFAULT 0,\n  notification_channels TEXT,\n  recipients TEXT,\n  webhook_url VARCHAR(500),\n  last_evaluated_at BIGINT,\n  last_triggered_at BIGINT,\n  total_triggers INT NOT NULL DEFAULT 0,\n  created_by VARCHAR(255),\n  created_at BIGINT NOT NULL,\n  updated_at BIGINT NOT NULL,\n  INDEX idx_custom_alert_metric (metric_type),\n  INDEX idx_custom_alert_active (is_active),\n  INDEX idx_custom_alert_severity (severity)\n);\n\nCREATE TABLE IF NOT EXISTS custom_alert_history (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  rule_id INT NOT NULL,\n  rule_name VARCHAR(255) NOT NULL,\n  metric_type VARCHAR(50) NOT NULL,\n  current_value DOUBLE NOT NULL,\n  threshold DOUBLE NOT NULL,\n  operator VARCHAR(20) NOT NULL,\n  severity VARCHAR(20) NOT NULL,\n  status VARCHAR(20) NOT NULL DEFAULT 'active',\n  message TEXT,\n  notification_channels TEXT,\n  triggered_at BIGINT NOT NULL,\n  acknowledged_at BIGINT,\n  acknowledged_by VARCHAR(255),\n  resolved_at BIGINT,\n  resolved_by VARCHAR(255),\n  INDEX idx_custom_alert_hist_rule (rule_id),\n  INDEX idx_custom_alert_hist_status (status),\n  INDEX idx_custom_alert_hist_severity (severity),\n  INDEX idx_custom_alert_hist_triggered (triggered_at)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2bBfAdpTc8yvngq.root --database RpnsLdN3u3f6PBDr9mn7Zq --execute CREATE TABLE IF NOT EXISTS custom_alert_rules (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  metric_type VARCHAR(50) NOT NULL,\n  operator VARCHAR(20) NOT NULL,\n  threshold DOUBLE NOT NULL,\n  threshold_max DOUBLE,\n  severity VARCHAR(20) NOT NULL DEFAULT 'warning',\n  is_active BOOLEAN NOT NULL DEFAULT TRUE,\n  evaluation_interval_minutes INT NOT NULL DEFAULT 5,\n  cooldown_minutes INT NOT NULL DEFAULT 30,\n  consecutive_breaches_required INT NOT NULL DEFAULT 1,\n  current_consecutive_breaches INT NOT NULL DEFAULT 0,\n  notification_channels TEXT,\n  recipients TEXT,\n  webhook_url VARCHAR(500),\n  last_evaluated_at BIGINT,\n  last_triggered_at BIGINT,\n  total_triggers INT NOT NULL DEFAULT 0,\n  created_by VARCHAR(255),\n  created_at BIGINT NOT NULL,\n  updated_at BIGINT NOT NULL,\n  INDEX idx_custom_alert_metric (metric_type),\n  INDEX idx_custom_alert_active (is_active),\n  INDEX idx_custom_alert_severity (severity)\n);\n\nCREATE TABLE IF NOT EXISTS custom_alert_history (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  rule_id INT NOT NULL,\n  rule_name VARCHAR(255) NOT NULL,\n  metric_type VARCHAR(50) NOT NULL,\n  current_value DOUBLE NOT NULL,\n  threshold DOUBLE NOT NULL,\n  operator VARCHAR(20) NOT NULL,\n  severity VARCHAR(20) NOT NULL,\n  status VARCHAR(20) NOT NULL DEFAULT 'active',\n  message TEXT,\n  notification_channels TEXT,\n  triggered_at BIGINT NOT NULL,\n  acknowledged_at BIGINT,\n  acknowledged_by VARCHAR(255),\n  resolved_at BIGINT,\n  resolved_by VARCHAR(255),\n  INDEX idx_custom_alert_hist_rule (rule_id),\n  INDEX idx_custom_alert_hist_status (status),\n  INDEX idx_custom_alert_hist_severity (severity),\n  INDEX idx_custom_alert_hist_triggered (triggered_at)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1832
}