{
  "query": "ALTER TABLE scheduled_reports \nADD COLUMN IF NOT EXISTS user_id INT NOT NULL DEFAULT 1 AFTER description,\nADD COLUMN IF NOT EXISTS report_type ENUM('spc_summary', 'cpk_analysis', 'violation_report', 'production_line_status', 'ai_vision_dashboard') DEFAULT 'spc_summary' AFTER user_id,\nADD COLUMN IF NOT EXISTS schedule_type ENUM('daily', 'weekly', 'monthly') DEFAULT 'daily' AFTER report_type,\nADD COLUMN IF NOT EXISTS schedule_time VARCHAR(10) DEFAULT '08:00' AFTER schedule_type,\nADD COLUMN IF NOT EXISTS schedule_day_of_week INT AFTER schedule_time,\nADD COLUMN IF NOT EXISTS schedule_day_of_month INT AFTER schedule_day_of_week,\nADD COLUMN IF NOT EXISTS production_line_ids JSON AFTER schedule_day_of_month,\nADD COLUMN IF NOT EXISTS product_ids JSON AFTER production_line_ids,\nADD COLUMN IF NOT EXISTS include_charts TINYINT DEFAULT 1 AFTER product_ids,\nADD COLUMN IF NOT EXISTS include_raw_data TINYINT DEFAULT 0 AFTER include_charts,\nADD COLUMN IF NOT EXISTS recipients JSON AFTER include_raw_data,\nADD COLUMN IF NOT EXISTS cc_recipients JSON AFTER recipients,\nADD COLUMN IF NOT EXISTS is_active TINYINT DEFAULT 1 AFTER cc_recipients,\nADD COLUMN IF NOT EXISTS last_run_at TIMESTAMP NULL AFTER is_active,\nADD COLUMN IF NOT EXISTS last_run_status ENUM('success', 'failed', 'pending') AFTER last_run_at,\nADD COLUMN IF NOT EXISTS last_run_error TEXT AFTER last_run_status,\nADD COLUMN IF NOT EXISTS next_run_at TIMESTAMP NULL AFTER last_run_error;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2bBfAdpTc8yvngq.root --database RpnsLdN3u3f6PBDr9mn7Zq --execute ALTER TABLE scheduled_reports \nADD COLUMN IF NOT EXISTS user_id INT NOT NULL DEFAULT 1 AFTER description,\nADD COLUMN IF NOT EXISTS report_type ENUM('spc_summary', 'cpk_analysis', 'violation_report', 'production_line_status', 'ai_vision_dashboard') DEFAULT 'spc_summary' AFTER user_id,\nADD COLUMN IF NOT EXISTS schedule_type ENUM('daily', 'weekly', 'monthly') DEFAULT 'daily' AFTER report_type,\nADD COLUMN IF NOT EXISTS schedule_time VARCHAR(10) DEFAULT '08:00' AFTER schedule_type,\nADD COLUMN IF NOT EXISTS schedule_day_of_week INT AFTER schedule_time,\nADD COLUMN IF NOT EXISTS schedule_day_of_month INT AFTER schedule_day_of_week,\nADD COLUMN IF NOT EXISTS production_line_ids JSON AFTER schedule_day_of_month,\nADD COLUMN IF NOT EXISTS product_ids JSON AFTER production_line_ids,\nADD COLUMN IF NOT EXISTS include_charts TINYINT DEFAULT 1 AFTER product_ids,\nADD COLUMN IF NOT EXISTS include_raw_data TINYINT DEFAULT 0 AFTER include_charts,\nADD COLUMN IF NOT EXISTS recipients JSON AFTER include_raw_data,\nADD COLUMN IF NOT EXISTS cc_recipients JSON AFTER recipients,\nADD COLUMN IF NOT EXISTS is_active TINYINT DEFAULT 1 AFTER cc_recipients,\nADD COLUMN IF NOT EXISTS last_run_at TIMESTAMP NULL AFTER is_active,\nADD COLUMN IF NOT EXISTS last_run_status ENUM('success', 'failed', 'pending') AFTER last_run_at,\nADD COLUMN IF NOT EXISTS last_run_error TEXT AFTER last_run_status,\nADD COLUMN IF NOT EXISTS next_run_at TIMESTAMP NULL AFTER last_run_error;",
  "returncode": 1,
  "logs": [
    "ERROR 1054 (42S22) at line 1: Unknown column 'user_id' in 'scheduled_reports'"
  ]
}